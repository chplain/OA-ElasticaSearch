<!DOCTYPE html>
<html lang="tw">
  <head>
    <meta http-equiv="Content-Language" content="zh-tw" />
    <meta http-equiv="Content-type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, minimal-ui" />

    <title>更新 (Update) - OA-ElasticaSearch</title>

    <meta name="robots" content="index,follow" />

    <meta name="author" content="吳政賢(OA Wu)" />

    <meta name="keywords" content="Elastica Search | OA Wu | php | OA-ElasticaSearch" />
    <meta name="description" content="這是一個 Elastica Search 基本 CRUD 的使用工具，架構於 Elastica Library，將讀取出來的資料物件化，以及包裝成方便開發的工具。查詢出來的每一筆資料，再將其封裝成物件單位，方便於物件化思維的設計。每筆物件皆可繼承基礎的 修改、刪除 的實體方法。" />
    <meta property="og:site_name" content="OA-ElasticaSearch" />
    <meta property="og:title" content="更新 (Update) - OA-ElasticaSearch" />
    <meta property="og:description" content="這是一個 Elastica Search 基本 CRUD 的使用工具，架構於 Elastica Library，將讀取出來的資料物件化，以及包裝成方便開發的工具。查詢出來的每一筆資料，再將其封裝成物件單位，方便於物件化思維的設計。每筆物件皆可繼承基礎的 修改、刪除 的實體方法。" />
    <meta property="og:url" content="http://comdan66.github.io/OA-ElasticaSearch/guide/update.html" />

    <meta property="fb:admins" content="100000100541088" />
    <meta property="fb:app_id" content="640377126095413" />

    <meta property="og:locale" content="zh_TW" />
    <meta property="og:locale:alternate" content="en_US" />

    <meta property="og:type" content="website" />
    <meta property="og:image" content="http://comdan66.github.io/OA-ElasticaSearch/guide/img/og/update.png" alt="OA-ElasticaSearch" />
    <meta property="og:image:type" content="image/jpeg" />
    <meta property="og:image:width" content="1200" />
    <meta property="og:image:height" content="630" />

    <link href="css/prettify/prettify.css" rel="stylesheet" type="text/css">
    <link href="css/public.css" rel="stylesheet" type="text/css" />
    <link href="css/crud.css" rel="stylesheet" type="text/css" />

    <script src="js/jquery_v1.10.2/jquery-1.10.2.min.js" language="javascript" type="text/javascript" ></script>
    <script src="js/prettify/prettify.js" language="javascript" type="text/javascript" ></script>
    <script src="js/public.js" language="javascript" type="text/javascript" ></script>

  </head>
  <body lang="zh-tw">
    <div id='container'>
      <div class='wrapper'>
        <div class='wrapper_right'>
          <h1>更新 Update</h1>

          <h2 class='save'>物件資料更新</h2>
          <div class='desc'>格式：<span>$objext->save();</span>。</div>

          <div class='tabs'>
            <div><div>PHP</div><div>結果</div></div>
            <div>
              <div>
                <pre class='php prettyprint'>
                  // 藉由 id 等於 1
                  $user = User::find(&#39;one&#39;, array(
                      &#39;must&#39; =&gt; array(&#39;id&#39; =&gt; 1)
                    ));

                  // 設定欄位
                  $user-&gt;account = &#39;comdan66&#39;;

                   // 儲存更新
                  $user-&gt;save();
                </pre>
              </div>
              <div class='i'>
                <img src='img/06.png' />
              </div>
            </div>
          </div>


          <h2 class='update'>單筆資料更新</h2>
          <div class='desc'>格式：<span>Class::update($params);</span>。</div>
          <ul class='l'>
            <li>$params - 陣列，依據 primary_key 欄位更新該筆資料，資料陣列，其 key 為 field 名稱，value 為 field 值。</li>
          </ul>

          <div class='tabs'>
            <div><div>PHP</div><div>結果</div></div>
            <div>
              <div>
                <pre class='php prettyprint'>
                  // 欲新增的資料
                  $params = array(
                      'id' =&gt; 1,
                      'account' =&gt; 'oa',
                      'name' =&gt; &quot;吳政賢&quot;,
                      'age' =&gt; 30,
                      'skills' =&gt; array(
                          'JavaScript', 'java', 'object-C'
                        )
                    );

                  // 依據 primary_key 欄位更新該筆資料
                  User::update($params);
                </pre>
              </div>
              <div class='i'>
                <img src='img/07.png' />
              </div>
            </div>
          </div>


          <h2 class='updateMany'>多筆資料更新</h2>
          <div class='desc'>格式：<span>Class::updateMany($params);</span>。</div>
          <ul class='l'>
            <li>$paramsList - 陣列，依據各筆的 primary_key 欄位更新。</li>
          </ul>

          <div class='tabs'>
            <div><div>PHP</div><div>結果</div></div>
            <div>
              <div>
                <pre class='php prettyprint'>
                  $params = array(
                      array(
                        'id' =&gt; 1,
                        'account' =&gt; 'oa',
                        'name' =&gt; &quot;吳政賢&quot;,
                        'age' =&gt; 30,
                        'skills' =&gt; array(
                            'JavaScript', 'java', 'object-C'
                          )
                      ), array(
                        'id' =&gt; 2,
                        'account' =&gt; 'Linux',
                        'name' =&gt; &quot;OB Wu&quot;,
                        'age' =&gt; 18,
                        'skills' =&gt; array()
                      )
                    );
                  // 依據各筆資料的 primary_key 欄位更新該筆資料
                  $users = User::updateMany($params);
                </pre>
              </div>
              <div class='i'>
                <img src='img/08.png' />
              </div>
            </div>
          </div>


        </div>
      </div>
    </div>
  </body>
</html>
